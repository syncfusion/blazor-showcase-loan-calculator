@page "/chart"
@using LoanCalculator.Models;

<ChartSeriesCollection>
    <ChartSeries Type="@Syncfusion.Blazor.Charts.ChartSeriesType.StackingColumn" ColumnWidth="0.425" XName="YearN" ColumnSpacing="1"
                 Width="2" YName="@nameof(AmortizationSchedule.TotalPrincipal)" Name="Principal Paid" YAxisName="yAxis">
        <ChartMarker Visible="false" Height="10" Width="10"></ChartMarker>
    </ChartSeries>
    <ChartSeries Type="@Syncfusion.Blazor.Charts.ChartSeriesType.StackingColumn" ColumnWidth="0.425" XName="YearN" ColumnSpacing="1"
                 Width="2" YName="@nameof(AmortizationSchedule.TotalInterest)" Name="Interest Paid" YAxisName="yAxis">
        <ChartMarker Visible="false" Height="10" Width="10"></ChartMarker>
    </ChartSeries>
    <ChartSeries Type="@Syncfusion.Blazor.Charts.ChartSeriesType.Line" XName="YearN" Width="2" YName="@nameof(AmortizationSchedule.RemainingBalance)"
                 Name="Balance">
        <ChartMarker Visible="true" Height="10" Width="10" Fill=@color[0]></ChartMarker>
    </ChartSeries>
</ChartSeriesCollection>
<ChartPrimaryXAxis Title="Years" ValueType=@Syncfusion.Blazor.Charts.ValueType.DateTimeCategory LabelFormat="yyyy" LabelIntersectAction="LabelIntersectAction.Rotate90" RangePadding="ChartRangePadding.None">
    <ChartAxisTitleStyle Color=@color[1] FontFamily="Inter" FontWeight="400" Size="12px" Opacity="0.62"></ChartAxisTitleStyle>
    <ChartAxisLabelStyle Color=@color[4] FontFamily="Inter" FontWeight="400" Size="12px"></ChartAxisLabelStyle>
    <ChartAxisLineStyle Width="1" Color=@color[2]></ChartAxisLineStyle>
    <ChartAxisMajorGridLines Width="0.5" Color="transparent"></ChartAxisMajorGridLines>
    <ChartAxisMajorTickLines Color="transparent"></ChartAxisMajorTickLines>
    
</ChartPrimaryXAxis>
<ChartPrimaryYAxis Title="Balance"  LabelFormat="c0" RangePadding="@Syncfusion.Blazor.Charts.ChartRangePadding.None">
    <ChartAxisTitleStyle Color=@color[1] FontFamily="Inter" FontWeight="400" Size="12px" Opacity="0.62"></ChartAxisTitleStyle>
    <ChartAxisLabelStyle Color=@color[4] FontFamily="Inter" FontWeight="400" Size="12px"></ChartAxisLabelStyle>
    
    <ChartAxisLineStyle Color=@color[2] Width="1"></ChartAxisLineStyle>
    <ChartAxisMajorGridLines Color=@color[3] Width="0.5"></ChartAxisMajorGridLines>
    <ChartAxisMinorTickLines Width="0.5"></ChartAxisMinorTickLines>
    <ChartAxisMajorTickLines Color=@color[2] Width="0.5"></ChartAxisMajorTickLines>
    <ChartAxisMinorGridLines Width="0.5"></ChartAxisMinorGridLines>
</ChartPrimaryYAxis>
<ChartAxes>
    <ChartAxis RowIndex="0" OpposedPosition="true" Name="yAxis" Title="Payment" LabelFormat="c0">
        <ChartAxisTitleStyle Color=@color[1] FontFamily="Inter" FontWeight="400" Size="12px" Opacity="0.62"></ChartAxisTitleStyle>
        <ChartAxisLabelStyle Color=@color[4] FontFamily="Inter" FontWeight="400" Size="12px"></ChartAxisLabelStyle>
        <ChartAxisLineStyle Color=@color[2] Width="0.5"></ChartAxisLineStyle>
        <ChartAxisMajorGridLines Width="0.5" Color="transparent"></ChartAxisMajorGridLines>
        
        <ChartAxisMinorGridLines Width="0.5"></ChartAxisMinorGridLines>
        <ChartAxisMajorTickLines Color=@color[2] Width="0.5"></ChartAxisMajorTickLines>
        <ChartAxisMinorTickLines Width="0.5"></ChartAxisMinorTickLines>
    </ChartAxis>
</ChartAxes>
<ChartTooltipSettings Enable="true" Shared="true" Fill="@color[5]" Opacity="1">
    <ChartTooltipTextStyle FontFamily="Inter"  Color="@color[6]" FontWeight="400" Size="12px"></ChartTooltipTextStyle>        
</ChartTooltipSettings>
<ChartArea>
    <ChartAreaBorder Color=@color[3] Width="0.5"></ChartAreaBorder>
</ChartArea>
<ChartLegendSettings ItemPadding="30" Padding="10">
    <ChartLegendTextStyle Color=@color[1] FontFamily="Inter" FontWeight="400" Size="12px" Opacity="0.62"></ChartLegendTextStyle>
</ChartLegendSettings>

<style>
    body.dark .ejSVGTooltip svg path{
        stroke:#9CA3AF;
    }

    body.dark .ejSVGTooltip svg  tspan{
        fill: #6b7280;
    }
</style>

@code{
    [Parameter]
    public string currentTheme { get; set; } = "Light";

    public string[] color = { "#4F46E5", "#6B7280", "#9CA3AF", "#E5E7EB", "#374151", "#000000", "#FFFFFF" };

    protected override void OnParametersSet()
    {
        if (currentTheme.Equals("Dark"))
        {
            color = new string[] { "#FF804D", "#9CA3AF", "#6B7280", "#4B5563","#9CA3AF","#FFFFFF","#000000"};
        }
        else
        {
            color = new string[] { "#4F46E5", "#6B7280", "#9CA3AF", "#E5E7EB", "#374151", "#000000", "#FFFFFF" };
        }
    }
}